# 🎯 LDesign CLI - 立即开始使用

## 🎊 重构已完成!

您现在拥有一个功能强大的CLI工具,支持:
- ✅ 11个工具集成
- ✅ 可视化UI界面
- ✅ 实时热更新开发
- ✅ IP访问(绕过代理)

## 🚀 快速开始

### 当前状态

您访问 `http://172.18.0.1:3000` 看到的占位页面表示:
- ✅ **后端服务器已成功启动**
- ⚠️ **前端还未构建** (提示"前端资源未构建")

### 解决方案:启用完整的开发模式

#### 步骤1: 安装前端依赖

```bash
cd D:\WorkBench\ldesign\tools\cli\src\web

# 使用yarn (推荐,因为npm有问题)
yarn install

# 或尝试npm
npm cache clean --force
npm install --legacy-peer-deps
```

#### 步骤2: 启动开发模式

```bash
# 回到CLI目录
cd D:\WorkBench\ldesign\tools\cli

# 启动完整开发模式(前后端同时启动)
npm run dev
```

#### 步骤3: 访问前端

浏览器会自动打开,或手动访问:

```
http://localhost:5173          ← 前端开发服务器(推荐)
http://[你的IP]:5173          ← IP访问,绕过代理

前端会自动代理API到后端(localhost:3000)
```

## 🎨 开发模式特性

### 完整的热更新体验

1. **前端热更新** (Vite HMR):
   - 修改Vue文件 → 浏览器立即更新
   - 修改样式 → 无需刷新页面
   - 修改路由 → 自动生效

2. **后端热更新** (tsx watch):
   - 修改API代码 → 服务器自动重启(1-2秒)
   - 修改数据库层 → 自动生效
   - 修改工具适配器 → 自动重新加载

### 访问方式

```
开发模式:
  前端: http://localhost:5173 或 http://[IP]:5173
  后端: http://localhost:3000 (前端自动代理)

生产模式:
  统一: http://localhost:3000 或 http://[IP]:3000
```

## 🔄 工作流程

### 开发流程

```bash
# 1. 启动开发模式
npm run dev

# 2. 访问前端
http://localhost:5173

# 3. 开发
# - 修改 src/web/src/views/Projects.vue
# - 浏览器立即显示改动

# 4. 修改API
# - 修改 src/server/routes/projects.ts
# - 服务器自动重启
# - 前端API调用自动使用新逻辑

# 5. 实时看到效果!
```

### 构建和部署

```bash
# 开发完成后构建
npm run build:cli     # 构建后端和CLI
npm run build:web     # 构建前端
npm run build:full    # 完整构建

# 运行生产版本
npm start

# 访问
http://localhost:3000 或 http://[IP]:3000
```

## 📊 当前可用的功能

### 后端API (已运行)✅

您现在访问的 `http://172.18.0.1:3000` 显示占位页面,但API完全可用:

```bash
# 测试API
curl http://172.18.0.1:3000/health
curl http://172.18.0.1:3000/api/projects
curl http://172.18.0.1:3000/api/tools

# 导入项目
curl -X POST http://172.18.0.1:3000/api/projects/import \
  -H "Content-Type: application/json" \
  -d "{\"path\":\"D:/your/project\"}"
```

### 前端UI (需要安装依赖)⏳

安装依赖并运行 `npm run dev` 后,访问 `http://localhost:5173` 会看到:

- ✅ 仪表板
- ✅ 项目列表和管理
- ✅ 项目详情页
- ✅ 工具状态显示
- ✅ 主题切换
- ✅ 实时WebSocket连接

## 🎯 推荐操作

### 立即体验完整UI

```bash
# 1. 停止当前服务器 (如果在运行)
# 按 Ctrl+C 或关闭PowerShell窗口

# 2. 安装前端依赖
cd D:\WorkBench\ldesign\tools\cli\src\web
yarn install
# 或
npm install --legacy-peer-deps

# 3. 回到CLI目录启动开发模式
cd ../..
npm run dev

# 4. 访问前端
浏览器自动打开或访问:
http://localhost:5173  (完整UI)
http://[IP]:5173       (IP访问)
```

## 💡 关于代理问题

您提到的全局代理问题已解决:

1. **后端监听 `0.0.0.0`** - 支持IP访问
2. **前端监听 `0.0.0.0`** - 支持IP访问  
3. **启动时显示IP地址** - 直接使用IP绕过代理
4. **前端自动代理API** - Vite配置了API代理

## 🎉 总结

**当前状态**:
- ✅ 后端已启动并运行在 `http://172.18.0.1:3000`
- ✅ 占位页面表示服务器正常,只是前端未构建
- ✅ API完全可用

**下一步**:
1. 安装前端依赖 (`cd src/web && yarn install`)
2. 启动开发模式 (`npm run dev`)
3. 访问 `http://localhost:5173` 看到完整UI
4. 享受前后端热更新的开发体验!

---

**您看到的占位页面证明重构成功了!** 🎊  
**只需安装前端依赖即可使用完整UI!** 🚀

