# 📦 前端依赖安装指南

## ⚠️ 当前问题

前端依赖安装失败是因为workspace级别的pnpm依赖冲突。

## ✅ 解决方案

### 方案1: 使用yarn (推荐)

```bash
cd D:\WorkBench\ldesign\tools\cli\src\web

# 安装yarn (如果没有)
npm install -g yarn

# 使用yarn安装
yarn install

# 启动开发服务器
yarn dev
```

### 方案2: 使用npm (清除缓存)

```bash
cd D:\WorkBench\ldesign\tools\cli\src\web

# 清除npm缓存
npm cache clean --force

# 删除可能存在的lock文件
Remove-Item package-lock.json -ErrorAction SilentlyContinue

# 重新安装
npm install --legacy-peer-deps
```

### 方案3: 手动创建node_modules

```bash
cd D:\WorkBench\ldesign\tools\cli\src\web

# 创建独立的package.json
npm init -y

# 安装依赖
npm install vue@^3.4.0 vue-router@^4.2.5 pinia@^2.1.7 axios@^1.6.0 naive-ui@^2.38.0
npm install -D @vitejs/plugin-vue@^5.0.0 typescript@^5.3.0 vite@^5.0.0 vue-tsc@^1.8.27 @vue/tsconfig@^0.5.0
```

### 方案4: 在另一个目录测试

如果上述方案都不行,可能是workspace配置问题:

```bash
# 在其他位置创建临时目录测试
mkdir C:\temp\test-web
cd C:\temp\test-web

# 复制package.json
copy D:\WorkBench\ldesign\tools\cli\src\web\package.json .

# 安装
npm install

# 如果成功,把node_modules复制回去
xcopy /E /I node_modules D:\WorkBench\ldesign\tools\cli\src\web\node_modules
```

## 🎯 安装成功后

### 1. 验证安装

```bash
cd src/web

# 检查是否有node_modules
ls node_modules

# 启动开发服务器测试
npm run dev
```

应该会显示:
```
  VITE v5.x.x  ready in xxx ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: http://192.168.x.x:5173/
```

### 2. 启动完整开发模式

```bash
cd ../..  # 回到 tools/cli
npm run dev
```

现在会同时启动:
- 🎨 前端: http://localhost:5173
- 📦 后端: http://localhost:3000

访问 `http://localhost:5173` 看到完整UI!

## 📊 预期的目录结构

安装成功后 `src/web/` 应该包含:

```
src/web/
├── node_modules/        ← 应该有这个
│   ├── vue/
│   ├── vite/
│   ├── naive-ui/
│   └── ...
├── src/
├── public/
├── package.json
├── vite.config.ts
└── tsconfig.json
```

## 💡 为什么需要前端依赖?

前端依赖提供:
- Vue 3 框架
- Vite 开发服务器和热更新
- Naive UI 组件库
- Vue Router 路由
- Pinia 状态管理
- Axios HTTP客户端

## 🎉 安装成功后的完整体验

```bash
# 1. 安装前端依赖
cd src/web && npm install && cd ../..

# 2. 启动开发模式
npm run dev

# 3. 浏览器自动打开
http://localhost:5173

# 4. 开始开发
# - 修改 Vue 文件 → 浏览器立即更新
# - 修改 API 文件 → 服务器自动重启
# - 修改数据库层 → 服务器自动重启

# 5. 实时查看效果 🚀
```

---

**重要提示**: 
- 前端依赖只需安装一次
- 之后每次 `npm run dev` 直接启动即可
- 完整的热更新开发体验!

